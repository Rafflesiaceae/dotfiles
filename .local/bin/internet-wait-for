#!/usr/bin/env dash
set -e
connected_ip=
connected_http=

while [ ! "$connected_ip" ] || [ ! "$connected_http" ]; do
    printf "ðŸ’¤"

    if [ ! "$connected_ip" ] && ping -w 2 -c 1 8.8.8.8 >/dev/null 2>&1; then
        printf "\n> ping succeeded - got ip\n"
        connected_ip=1
    fi

    if [ ! "$connected_http" ] && curl --max-time 3 "https://www.google.com/" >/dev/null 2>&1; then
        printf "\n> curl succeeded - got http\n"
        connected_http=1
    fi

    sleep 1
done
